# Проектная работа "Веб-ларек"
&ensp;Приложение интернет-каталога товаров - магазин вещей для разработчиков. Можно посмотреть предложения, собрать свою корзину и сделать заказ.  
## Ссылки на проект
* [Git репозиторий проекта](https://github.com/DmitriyRuf/web-larek-frontend.git) 
* [Страница проекта](https://dmitriyruf.github.io/web-larek-frontend) 
## Описание
&ensp;Проект реализован на парадигме MVP (Model-View-Presenter), в котором слой Model работает с API проекта и данными приложения, слой View - отвечает за отоброжение данных и взаимодействие с пользователем посредством событий, слой Presenter - отвечает за связь между слоем Model и View, здесь выполнена основная работа с объектами проекта и обработка событий при помощи класса `EventEmitter`.

## Базовые классы

### Класс `Api`
&ensp;Предназначен для обработки API-запросов к серверу. 
#### Конструктор:
- `constructor(baseUrl: string, options: RequestInit = {})` - принимает базовый URL(`baseUrl`) к серверу API и объект опций заголовка(options);
#### Типы:
- `ApiPostMethods` - тип методов запроса API;
- `ApiListResponse<Type>` - тип данных ответа сервера API;
#### Поля:
- `baseUrl` - базовый URL для запроса для формирования динамической ссылки API, только для чтения;
- `options` - объект опций заголовка для формирования секции заголовка запроса API, защещенный;
#### Методы:
- `handleResponse(response: Response): Promise<object>` -  обработка ответа сервера API(`response`). Получает объект ответа и возвращает промис(`Promise<object>`) с объектом json или отклоняет промис;
- `get(uri: string)` - принимает часть url(`uri`) базового URL для запроса к конкретному API и выполняет запрос `GET`. Возвращает промис ответа сервера при помощи метода `handleResponse`;
- `post(uri: string, data: object, method: ApiPostMethods = 'POST')` - принимает часть url(`uri`) базового URL для запроса к конкретному API, объект данных для отправки в теле запроса(`body`). Возвращает промис ответа сервера при помощи метода `handleResponse`;

### Класс `EventEmitter`
&ensp;Брокер событий на основе интерфейса `IEvents`. реализован на основе паттера «Observer». позволяет устанавливать и снимать слушатели событий и выполнять их обработку
#### Конструктор:
- `constructor()` -инициализирует объект события(`_events`);
#### Типы:
- `EventName` - тип имени события;
- `Subscriber` - тип функции подпищика события;
- `EmitterEvent` - тип объекта события для передачи имени события и объекта данных при обработке события;
#### Поля:
- `_events` - объект типа `Map<EventName, Set<Subscriber>>`, защещенный;
#### Методы:
- `on` - предназначен для подписки на событие. Входящие параметры: `eventName` - имя события, `callback` - функция обработки;
- `off` - предназначен для отписки от события. Входящие параметры: `eventName` - имя события, `callback` - подписчик;
- `emit` - предназначен для уведомления что событие наступило. Входящие параметры: `eventName` - имя события, `data` - объект данных при обработке события;
- `onAll` - предназначен для подписки на все события. Входящие параметры: `callback` - объек события с объетом данных обработки;
- `offAll` - предназначен для отписки от всех событий;
- `trigger` - триггер, генерирующий событие при вызове. Входящие параметры: `eventName` - имя события, `context` - объект данных при обработке события;

## СЛОЙ МОДЕЛИ

### Класс `Catalog`(интерфейс: `ICatalog`)
&ensp;Предназначен для работы с моделью данных проекта. Включает в себя данные по продуктам, корзине и заказу. Позволяет выполнять проверку данных и расчеты, необходимые для модели данных.

#### Конструктор:
- `constructor(protected events: IEvents)` - инициализирует объекты списка продуктов, корзины, ошибок данных и данные заказа
#### Поля:
- `_productList` - список продуктов полученных из API типа `Product[]`, защещенное;
- `_busketList` - список продуктов в корзине типа `Product[]`, защещенное;
- `_orderSuccess` - результат отправки заказа методом `POST` типа `OrderPost`, защещенное;
- `order` - данные заказа, заполнение перед оптравкой на сервер выполнено поэтапно. Тип данных `Order`;
- `productSelected` - выбранный продукт типа `Product`;
- `errors` - объект для хранения текстов ошибок по атрибутам заказа типа `Errors`;
- `productList` - get/set-атрибут для получения и установки объекта `_productList`. set-атрибут получает спикок продуктов `data: Product[]`. Для set-атрибута инициализация события `catalog:change`;
- `busketList` - get/set-атрибут для получения и установки объекта `_busketList`. set-атрибут получает спикок продуктов `data: Product[]`;
- `orderSuccess` - get/set-атрибут для получения и установки объекта `_orderSuccess`. set-атрибут получает объект ответа успешного создания заказа `data: OrderPost`;
- `events` - объект брокера событий;
#### Методы:
- `clearCatalog` - очистка объекта `_productList`. Без входных параметров;
- `clearBusket` - очистка объекта `_busketList`. Без входных параметров;
- `clearOrder` - очистка объекта `_orderSuccess` и `order`. Без входных параметров;
- `getBasketCount` - возвращяет количество записей объекта `_busketList`. Без входных параметров;
- `getBasketTotal` - возвращяет общую сумму стоимости корзины из объекта `_busketList`. Без входных параметров;
- `setProductSelected` - устанавливает объект выбранного продукта `productSelected`. Входной параметр `value: Product` - объектю. Инициализация события `product:open` продукта;
- `setProduct` - добавление/обновление продукта в объектах `_productList` и `_busketList`;
- `setOrderItems` - формирование списка ID продуктов из корзины в заказ `order`;
- `setOrderField` - установка отдельных атрибутов заказа по имени поля. Передается `field` - имя поля, `value` -значение, partName - часть данных которые нужно проверить на корректность;
- `checkProductInBasket` - проверяет наличие продукта в корзине `_busketList`. Передается `value` типа `Product`. возвращает булевое значение наличия продукта в корзине;
- `checkBusketList` - возвращает булевое значение наличия продуктов в корзине `_busketList`. Без входных параметров;
- `addBasketProduct` - добавляет продукт в корзину `_busketList`. Передается `value` типа `Product`;
- `deleteBasketProduct` - уудаляет прожукт из корзины `_busketList`. Передается `value` типа `Product`;
- `_validateOrderData` - проверка установленных данных части заказа `order` по атрибутам `payment` и `address`. Инициализация события `order:error`;
- `_validateContactsData` - проверка установленных данных части заказа `order` по атрибутам `email` и `phone`. Инициализация события `contacts:error`;

### Класс `ProductAPI`(родитель: `Api`, интерфейс: `IProductAPI`)
&ensp;Предназначен для работы с данными API сервера. Получение списка продуктов, продукта по ID, отправка заказа на сервер.
#### Конструктор:
- `constructor(cdn: string, baseUrl: string, options?: RequestInit)` - принимает параметры: `cdn` - путь к изображению продукта, `baseUrl` - основной адрес сервера, необязательный параметр `options` - объект опци заголовка API запроса. Инициализирует родительский коструктор класса `Api` и устанавливает атрибут `cdn`;
#### Поля:
- `cdn` - путь к изображению продукта;
- `items` - список полученных продуктов из API типа `Product[]`;
#### Методы:
- `getProductList()` - выполняет запрос `GET` списка продуктов с сервера по API `/product` и возвращает промис с результатом ответа сервера с данными типа `Product[]`. При выполнении формирует ссылку на изображение продукта при помощи атрибута `cdn`;
- `getProduct` - выполняет запрос `GET` продукта по входному параметру `id` типа `ProductId` по API `/product/${id}` и возвращает промис с результатом ответа сервера с данными типа `Product`. При выполнении формирует ссылку на изображение продукта при помощи атрибута `cdn`;
- `postOrder` - выполняет запрос `POST` для отправки заказа по API `/order` по входному параметру `order` типа `Order` и возвращает промис с результатом сервера с данными типа `OrderPost`;

## СЛОЙ ПРЕДСТАВЛЕНИЯ

### Класс `CatalogPage`(интерфейс: `ICatalogPage`)
&ensp;Предназначен для работы с элементом разметки основной страницы проекта `.page`.
#### Конструктор:
- `constructor(container: HTMLElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует события для них основной страницы проекта. На вход получает `container`, брокер событий `events` и объект интерфейса  `IActions`(необязательный параметр). для объекта `basketButtonSelector` регистрация события `basket:open`;
#### Типы:
- `SettingCatalogPage` - тип объекта настроек представления: селекторы, декоративные классы;
#### Поля:
- `_catalogPageSetting` - объект настроек для разметки `SETTINGS['catalogPage']`:
- `contentElement` - основной контейнер с селектором `.page`;
- `basketButtonSelector` - элемент разметки кнопки корзины с селектором `.header__basket`;
- `basketCounterSelector` - элемент разметки счетчика корзины с селектором `.header__basket-counter`;
- `catalogSelector` - элемент разметки с селектором `.gallery`, который будет содержать элементы карточек продуктов;
- `wrapperSelector` - элемент разметки с селектором `.page__wrapper` для блокировки содежимого при открытии модального окна;
- `locked` - set-атрибут для установки/удаления для объекта `wrapperSelector` класса `page__wrapper_locked`. входной параметр `locked: boolean`;
- `productList` - set-атрибут для установки контента объекта `catalogSelector`. Получает на вход подготовленный набор элементов `productList: HTMLElement[]`;
- `couterBasket` - set-атрибут для установки контента объекта `basketCounterSelector`. Получает на вход количество продуктов в корзине  элементов `count: number`;
#### Методы:
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными. Не принимает входных параметров;

### Класс `Basket`(интерфейс: `IBasket`)
&ensp;Предназначен для работы с элементом разметки контента корзины в модульном окне по шаблону `#basket`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона карзины. На вход получает `template`, брокер событий `events` и объект интерфейса  `IActions`(необязательный параметр). для объекта `buttonElement` регистрация события `order:open`;
#### Типы:
- `SettingBasket` - селекторы, текстовые константы;
#### Поля:
- `_bascketSetting` - объект настроек для разметки `SETTINGS['basket']`:
- `contentElement` - основной контейнер корзины, склонированный с шаблона `template` с селектором `.basket`;
- `productListElement` - элемент разметки со списком продуктов с селектором `.basket__list`;
- `buttonElement` - элемент разметки кнопки оформления заказа с селектором `.basket__button`;
- `basketTotalElement` - элемент разметки с общей стоимостью корзины с селектором `.basket__price`;
- `productList` - set-атрибут для установки контента объекта `productListElement`. Получает на вход подготовленный набор элементов `productList: HTMLElement[]`. Установка активности кнопки `buttonElement`;
- `basketTotal` - set-атрибут для установки общей стоимости корзины элемента разметки `basketTotalElement`. 
#### Методы:
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными. Не принимает входных параметров;

### Класс `CardCatalog`(интерфейс: `ICardCatalog`)
&ensp;Предназначен для работы с элементом разметки продукта в списке карточек продукта основной страницы проекта по шаблону  `#card-catalog`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона карточки продукта. На вход получает `template`, брокер событий `events` и объект интерфейса  `IActions`(необязательный параметр). Для объекта `contentElement` регистрация события `click` c регистрацией события из объекта `actions`, в который из презентера передан объект карточки `Product` по событию `catalog:change`;
#### Типы:
- `SettingCardCatalog` - тип объекта настроек представления: селекторы;
#### Поля:
- `_cardCatalogSetting` - объект настроек для разметки `SETTINGS['cardCatalog']`:
- `contentElement` - основной контейнер карточки, склонированный с шаблона `template` с селектором `.card`;
- `titleElement` - элемент разметки с селектором `.card__title` для атрибута `Product.title`;
- `priceElement` - элемент разметки с селектором `.card__price` для атрибута `Product.price`;
- `categoryElement` - элемент разметки с селектором `.card__category` для атрибута `Product.category`;
- `imageElement` - элемент разметки с селектором `.card__image` для атрибута ссылки на изображение `Product.image`;
- `category` - set-атрибут для определения свойств отображения для категории. Для элемента разметки `categoryElement` устанавка класса цвета категории из настройки `SETTINGS['formatView']['categoryColorClass']`;
#### Методы:
- `setPrice` - защещенный метод для установки текста со стоимостью продукта по шаблону из настройки `SETTINGS.formatData.formatCurrency`;
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными на основе полученного объекта продукта `data: Product` и пересчитанного индекса `index?: number` продукта в корзине из презентора;

### Класс `CardPreview`(родитель: `CardCatalog`, интерфейс: `ICardPreview`)
&ensp;Предназначен для работы с элементом разметки продукта в модульном окне по шаблону `#card-preview`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона открытой карточки продукта. На вход получает `template`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Инициализирует родительский коструктор класса `CardCatalog` для использования функционала отрисовки схожих элементов разметки карточки. Для объекта `buttonElement` регистрация события `click` c регистрацией события из объекта `actions`, в который из презентера передан объект карточки `Product` либо по событию `product:add` либо `product:delete` в зависимости от того, добавлен ли продукт в корзину или нет;
#### Типы:
- `SettingCardPreview` - тип объекта настроек представления: селекторы, текстовые константы;
#### Поля:
- `_cardPreviewSetting` - объект настроек для разметки `SETTINGS['cardPreview']`;
- `contentElement` - основной контейнер карточки, склонированный с шаблона `template` с селектором `.card`;
- `descriptionElement` - элемент разметки с селектором `.card__text` для атрибута `Product.description`;
- `buttonElement` - элемент разметки кнопки удаления/добавления продукта в корзине с селектором `.card__button`;
#### Методы:
- `setButtonEnabled` - установка активноси кнопки удаления/добавления продукта на основе входных данных продукта `data: Product`;
- `setButtonText` - установка текста кнопки удаления/добавления продукта на основе входного параметра `value`;
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными на основе полученного объекта продукта `data: Product`;

### Класс `CardBasket`(родитель: `CardCatalog`, интерфейс: `ICardBasket`)
&ensp;Предназначен для работы с элементом разметки продукта в модульном окне внутри элемента разметки `Basket` по шаблону `#card-basket`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона элемента продукта в корзине. На вход получает `template`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Инициализирует родительский коструктор класса `CardCatalog` для использования функционала отрисовки схожих элементов разметки карточки. Для объекта `buttonDeleteElement` регистрация события `click` c регистрацией события из объекта `actions`, в который из презентера передан объект карточки `Product` по событию `basket:delete`;
#### Типы:
- `SettingCardBasket` - тип объекта настроек представления: селекторы;
#### Поля:
- `_basketCardSetting` - объект настроек для разметки `SETTINGS['cardBasket']`;
- `contentElement` - основной контейнер карточки, склонированный с шаблона `template` с селектором `.card`;
- `indexElement` - элемент разметки с селектором `.basket__item-index` для атрибута `index` передаваемого при отрисовки основного элемента;
- `buttonDeleteElement` - элемент разметки кнопки удаления продукта в корзине с селектором `.basket__item-delete`;
#### Методы:
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными на основе полученного объекта продукта `data: Product` и пересчитанного индекса `index?: number` продукта в корзине из презентора;

### Класс `OrderForm`(интерфейс: `IOrderForm`)
&ensp;Предназначен для работы с элементом разметки контента формы оформления заказа на этапе выбора способа платежа и адреса по шаблону `#order`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона элемента формы заказа. На вход получает `template`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Для объекта `buttonNextElement` определение слушателя `submit` для регистрации события `contacts:open`, для каждого элемента кнопок в объекте `buttonListElement` регистрация события `payment:select` с передачей элемента размекти разметки кнопки, для каждого элемента в объекте `inputListElement` определение слушателя на ввода данных в поля `input` регистрация события `order:change` с передачей типа части данных `partName` имени поля `field` и значения `value` для последующей обработки в презенторе для данных модели `catalog`;
#### Типы:
- `SettingOrderForm` - тип объекта настроек представления: селекторы;
#### Поля:
- `_orderFormSetting` - объект настроек для разметки `SETTINGS['orderForm']`;
- `contentElement` - основной контейнер формы ввода, склонированный с шаблона `template` с селектором `.form[name=order]`;
- `buttonListElement` - элемент разметки с селектором `.button_alt` с элементами всех входящих кнопок выбора способа оплаты;
- `inputListElement` - элемент разметки с селектором `.form__input` с элементами всех входящих полей ввода;
- `buttonNextElement` - элемент разметки кнопки продолжения оформления заказа с селектором `.button[type=submit]`;
- `formErrorsElement` - элемент разметки для текста ошибки с селектором `.form__errors`;
- `payment` - set-атрибут для установки вида оплаты на элементе, получает вид оплаты типа `Payment` и устанавливает декоративный класс `button_alt-active` для выбранной кнопки вида оплаты;
- `valid` -  set-атрибут для установки активности кнопки после успешной/неуспешной валидации формы заказа. Получает `boolean`;
#### Методы:
- `refresh` - очистка полей формы при необходимости. Не принимает параметров;
- `renderError` - вывод текстов ошибок при валидации формы. Принимает объек типа `Errors` со массивом ошибок для полей валидации;
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными. Не принимает входных параметров;

### Класс `ContactsForm`(интерфейс: `IContactsForm`)
&ensp;Предназначен для работы с элементом разметки контента формы контактных данных пользователя по шаблону `#contacts`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона элемента формы контактов. На вход получает `template`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Для объекта `buttonNextElement` определение слушателя `submit` для регистрации события `order:submit`, для каждого элемента в объекте `inputListElement` определение слушателя на ввода данных в поля `input` регистрация события `contacts:change` с передачей типа части данных `partName` имени поля `field` и значения `value` для последующей обработки в презенторе для данных модели `catalog`;
#### Типы:
- `SettingContactsForm` - тип объекта настроек представления: селекторы;
#### Поля:
- `_contactsFormSetting` - объект настроек для разметки `SETTINGS['contactsForm']`;
- `contentElement` - основной контейнер формы ввода, склонированный с шаблона `template` с селектором `.form[name=contacts]`;
- `inputListElement` - элемент разметки с селектором `.form__input` с элементами всех входящих полей ввода;
- `buttonNextElement` - элемент разметки кнопки продолжения оформления контактов с селектором `.button[type=submit]`;
- `formErrorsElement` - элемент разметки для текста ошибки с селектором `.form__errors`;
- `valid` -  set-атрибут для установки активности кнопки после успешной/неуспешной валидации формы контактов. Получает `boolean`;
#### Методы:
- `refresh` - очистка полей формы при необходимости. Не принимает параметров;
- `renderError` - вывод текстов ошибок при валидации формы. Принимает объек типа `Errors` со массивом ошибок для полей валидации;
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными. Не принимает входных параметров;

### Класс `SuccessForm`(интерфейс: `ISuccessForm`)
&ensp;Предназначен для работы с элементом разметки контента успешного оформления заказа по шаблону `#success`.
#### Конструктор:
- `constructor(template: HTMLTemplateElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них шаблона элемента формы успешного заказа. На вход получает `template`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Для объекта `closeButtonElement` определение слушателя `click` для регистрации события `success:close`;
#### Типы:
- `SettingSuccessForm` - тип объекта настроек представления: селекторы, текстовые константы;
#### Поля:
- `_successFormSetting` - объект настроек для разметки `SETTINGS['successForm']`;
- `contentElement` - основной контейнер формы успешного заказа, склонированный с шаблона `template` с селектором `.order-success`;
- `closeButtonElement` - элемент разметки кнопки закрытия формы с селектором `.order-success__close`;
- `successDescriptionElement` - элемент разметки для текста успешного заказа с селектором `.order-success__description`;
#### Методы:
- `render` - возвращает элемент разметки `contentElement` с подготовленными данными. принимает параметр типа `OrderTotal` и на основе настройки `SETTINGS.successForm.textTotal]` формирует тексты вывода в элемент `successDescriptionElement`;

### Класс `Modal`(интерфейс: `IModal`)
&ensp;Предназначен для работы с элементом разметки модульного окна по селектору id `#modal-container`.
#### Конструктор:
- `constructor(container: HTMLElement, protected events: IEvents, actions?: IActions)` - инициализирует элементы разметки и регистрирует событя для них контейнера модального окна. На вход получает `container`, брокер событий `events` и объект интерфейса `IActions`(необязательный параметр). Определение слушателя `click` Для объектов `closeButtonElement`, `container`, `contentElement`;
#### Типы:
- `SettingModal` - тип объекта настроек представления: селекторы, декоративные классы;
#### Поля:
- `_modalSetting` - объект настроек для разметки `SETTINGS['modal']`; 
- `contentElement` - set-атрибут для установки защещенного атрибута `_content`. Принимает элемент разметки типа `HTMLElement` - элемент шаблонных форм и элементов проекта;
- `closeButtonElement` - элемент разметки кнопки закрытия модульного окна с селектором `.modal__close`;
- `_content` - основной элемент модульного окна, из объекта `container` с селектором `.modal__content`;
#### Методы:
- `open` - метод открытия модального окна. Устанавливает декоративный класс `modal_active` для объекта `_content` и инициирует событие брокера `modal:open`;
- `close` -  метод закрытия модального окна. Убирает декоративный класс `modal_active` для объекта `_content` и инициирует событие брокера `modal:close`;
- `render` - вызывает метод `open` и возвращает подготовленный объект `container`. Не принимает входных параметров;

## СЛОЙ ПРЕЗЕНТЕРА
&ensp;Слой не выделен в отдельный класс и размещен в основном скрипте приложения(файл `src/index.ts`)

## СОБЫТИЯ ПРОЕКТА
&ensp;Список основных событий перчислен в основных настройках проекта в объекте `SETTINGS.appEvents`:
- `catalog:change` - изменение всего списка продуктов полученных из API. Регистрация в классе модели `Catalog` при установке set-атрибута `productList`. Обработка события - обновление представления класса `CatalogPage` с изменением set-атрибута `cardList` - каталога карточек продукта;
- `product:select` - регистрация на событии `onCLick` на карточке каталога продуктов (класс `CardCatalog`). Обработка события - вызов метода метода `getProduct` объекта класса модели `ProductAPI` для запроса новых данных по продукту и установка атрибута класса модели `Catalog` - `productSelected` при помощи метода `setProductSelected`; 
- `product:open` - регистрация при вызове метода `setProductSelected` класса модели `Catalog`. Обработка события - создание представления класса `CardPreview` на основе данных переданного объекта продукта `productSelected`, установка контента для объекта модульного окна класса `Modal`;
- `product:add` - регистрация на событии `onCLick` на кнопке представления класса `CardPreview`, если продукт еще не добавлен в объект корзины `_busketList` класса модели `Catalog`. Обработка события - добавление продукта в объект `_busketList` и обновление счетчика продуктов в корзине представления класса `CatalogPage`, смена слушателя события кнопки добавления продукта в корзину на удаление товара - событие `product:delete`;
- `product:delete` - регистрация на событии `onCLick` на кнопке представления класса `CardPreview`, если продукт уже в объекте корзины `_busketList` класса модели `Catalog`. Обработка события - удаление продукта из объекта `_busketList` и обновление счетчика продуктов в корзине представления класса `CatalogPage`, смена слушателя события кнопки добавления продукта в корзину на добавление товара - событие `product:add`;
- `basket:open` - при событии `onCLick` на кнопке корзины в представлении класса `CatalogPage`. Обработка события - создание представления класса `Basket`, отрисовка компонентов разметки корзины, установка контента для объекта модульного окна класса `Modal`;
- `basket:delete` - регистрация на событии `onCLick` на кнопке удаления представления класса `CardBasket`. Обработка события - удаление продукта из объекта `_busketList` класса модели `Catalog` на основе данных переданного объекта продукта в событие и обновление счетчика продуктов в корзине представления класса `CatalogPage`,  установка set-атрибута `cardList` представления класса `Basket`, отрисовка компонентов разметки корзины с новым количеством продуктов;
- `order:open` - регистрация на событии `onCLick` на кнопке оформления заказа представления класса `Basket`. Обработка события - обновляние представления класса `OrderForm`, ;
- `payment:select` - регистрация на событии `onCLick` всех кнопок вида оплаты представления класса `OrderForm` с передачей объекта компонента кнопки. Обработка события - установка способа оплаты в объекте `order` класса модели `Catalog` при помощи метода `setOrderField`, обновление отображения компонентов кнопок выбора способа оплаты;
- `order:change` - регистрация на событии `input` всех полей ввода представления класса `OrderForm` с передачей значений полей. Обработка события - установка данных полей вода в объект `order` класса модели `Catalog`;
- `order:error` - регистрация при вызове метода `_validateOrderData` класса модели `Catalog` при наличии ошибок валидации объекта `order` с передачей объекта списка полей с ошибкой и текстом ошибки. Обработка события - установка set-атрибута `valid` и установка текста ошибок в компонент разметки;
- `contacts:open` - регистрация на событии `submit` на кнопке отправки заказа представления класса `OrderForm`. Обработка события - обновляние представления класса `ContactsForm`;
- `contacts:change` - регистрация на событии `input` всех полей ввода представления класса `ContactsForm` с передачей значений полей. Обработка события - установка данных полей вода в объект `order` класса модели `Catalog`;
- `contacts:error` - регистрация при вызове метода `_validateContactsData` класса модели `Catalog` при наличии ошибок валидации объекта `order` с передачей объекта списка полей с ошибкой и текстом ошибки. Обработка события - установка set-атрибута `valid` и установка текста ошибок в компонент разметки;
- `order:submit` - регистрация на событии `submit` на кнопке отправки заказа представления класса `ContactsForm`. Обработка события - передача ID продуктов и суммы заказа из объекта корзины `_busketList` в объект `order` класса модели `Catalog` при помощи метода `setOrderItems`, отправка объекта `order` класса модели `Catalog` на сервер при помощи метода `postOrder` объекта класса модели `ProductAPI`, установка успешного ответа от сервера в set-атрибут `orderSuccess`, очистка объекта `order`, очистка объекта `_busketList` класса модели `Catalog`, обновление счетчика продуктов в корзине представления класса `CatalogPage`, создание представления класса `SuccessForm` обновление компонентов разметки из данных объекта `orderSuccess` класса модели `Catalog`;
- `success:close` - регистрация на событии `onCLick` на кнопке закрытия заказа представления класса `CardBasket`.;
- `modal:open` - регистрация при вызове метода `open` представления класса `Modal`. Обработка события - установка set-атрибута `locked` представления класса `CatalogPage`;
- `modal:close` - регистрация при вызове метода `close` представления класса `Modal`. Обработка события - очистка set-атрибута `locked` представления класса `CatalogPage`;

#### Пример работы событийно-ориентированного подхода
&ensp;Разбор событийной модели открытия карточки продукта в модальном окне при клике мышью по продукту в каталоге товаров:
- при создании карточки продукта `CardCatalog` в каталоге товаров в ее конструктор передается объект `actions` интерфейса `IActions` с объектовм `product` и функцией брокера событий `events.emit('product:select', product)` и для элемента с селектором `.card` устанавливается слушатель события `addEventListener('click', actions.onClick)`;
- при клике мышкой на элемент карточки продукта `.card` в слое презенторе брокер событий `events` класса `EventEmitter` запустит `on('product:select', (product: IProduct)=> {...})` в котором выполниться вызов метода `setProductSelected(product)` модели `Catalog`;
- метод `setProductSelected` установит атрибут `productSelected` модели `Catalog`, который в дальнейшем можно будет обновлять, добавлять и удалять из корзины и инициирует запуск события брокера `this.events.emit('product:open', product)`;
- в презенторе брокер событий `events` запустит `on('product:open', (product: IProduct)=> {...})` в котором выполнится создание локального представления класса `cardPreview`, в конструктор которого передается объект `cardPreviewTemplate`(шаблон разметки `id="card-preview"`), и брокер событий `events` для регистрации событий для созданного представления, далее для объекта `modal` класса представления `Modal` выполниться установка нового объекта контента класса `cardPreview`с обновлением данных компонентов разметки соглано переданному объекту `product` - `cardPreview.render(product)`, далее выполнится обновление контента `modal.render()`;
- в методе `render()` объекта `modal` выполниться установка нового контента в защищенный атрибут `_content` и  вызов метода `open()` класса `Modal`;
- метод `open()` добавит класс видимости модального окна `contentElement.classList.add(this._modalSetting.activeClass)`( `_modalSetting.activeClass` - атрибут из объекта базовой настройки проекта `SETTINGS` со значением `modal_active`, `contentElement` - компонент разметки модульного окна), далее инициируется запуск события `modal:open` через переданный в конструктор брокер событий `this.events.emit('modal:open')`;
- в презентере выполниться обработчик события `events.on('modal:open', () => {...})` который установит set-атрибут `locked` объекта `сatalogPage` класса представления `CatalogPage` в значение `true`;
- при установке атрибута `locked` объекта `сatalogPage` выполниться установка класса `page__wrapper_locked` для компонента разметки `wrapperElement` объекта `сatalogPage`;
- модульное окно карточки продукта подготовлено и отображено на странице проекта; 


## Основные типы и интерфейсы модели данных
- `Payment` - общий тип оплаты (`cash|online`);
- `Category` - общий тип категории (`софт-скил|хард-скил|кнопка|дополнительное|другое`);
- `ProductId` - ID продукта;
- `ProductDescription` - описание продукта;
- `ProductImage` - изображение продукта;
- `ProductTitle` - название продукта;
- `ProductCategory` - категория продукта;
- `ProductPrice` - цена продукта;
- `OrderId` - ID заказа;
- `OrderPayment` - вид оплаты продукта;
- `OrderEmail` - электронная почта клиента заказа;
- `OrderPhone` - номер телефона клиента заказа;
- `OrderAddress` - адрес клиента для доставки заказа;
- `OrderTotal` - общая сумма заказа;
- `Product` - объект данных продукта для модели;
- `Order` - объект данных заказа для модели;
- `OrderPost` - объект данных успешного заказа для модели;
- `Error` - ошибка валидации формы;
- `Errors` - объект валидации форм ввода, содержит объект с атрибутами объекта заказа и ошибкой;
- `AppEvents` - объЪект доступных событий проекта;
- `FormatData` - объект с описанием формата данных полей при валидации форм и текстов ошибок к ним;
- `FormatView` - объект с описанием формата отображения компонентов разметки в зависимости от данных модели;
- `IActions` - интерфейс метода onClick для события MouseEvent;

## Базовые настройки проекта
- `API_ORIGIN` - константа базового URL сервера API-запросов;
- `API_URL` - константа базового URL библиотеки API-запросов; 
- `CDN_URL` - константа URL для формирования ссылки изображения картички продукта;
#### Объект базовых настроек проекта `SETTINGS`(интерфейс: `ISettings`)
- `formatData` - основные настройки для формата данных модели и валидации форм;
- `formatView` - основные настройки для формата отображения компонентов разметки в зависимости от данных модели(Декоративные классы);
- `appEvents` - перечень событий проекта;
- `catalogPage` - настройки для View catalogPage: селекторы, декоративные классы;
- `cardCatalog` - настройки для View cardCatalog: селекторы;
- `cardPreview` - настройки для View cardPreview: селекторы, текстовые константы;
- `cardBasket` - настройки для View cardBasket: селекторы;
- `basket` - настройки для View basket: селекторы, текстовые константы;
- `orderForm` - настройки для View orderForm: селекторы;
- `contactsForm` - настройки для View contactsForm: селекторы;
- `successForm` - настройки для View successForm: селекторы, текстовые константы;
- `modal` - настройки для View successForm: селекторы, декоративные классы;

## Стек: HTML, SCSS, TS, Webpack
## Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом
- src/components/model/ — папка с компонентами модели данных
- src/components/view/ — папка с компонентами представлений данных
- src/types/components/base - папка с типами и интерфейсами базового кода
- src/types/components/model/ - папка с типами и интерфейсами модели данных
- src/types/components/view/ - папка с типами и интерфейсами представлений данных
- src/types/utils/ - папка с типами данных настройки приложения
## Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с основными типами модели данных
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами
## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```
