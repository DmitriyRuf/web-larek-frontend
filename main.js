!function(){"use strict";var t="".concat("","/api/weblarek"),r="".concat("","/content/weblarek"),o={formatData:{formatCurrency:function formatCurrency(t){return"".concat(t," синапсов")},formatPriceNull:"Бесценно",address:{regexp:/[а-яёА-ЯЁa-zA-Z0-9\s\/.,-]$/,regexpError:"Введен некорректный адресс",emptyError:"Необходимо указать адресс"},payment:{emptyError:"Необходимо указать способ оплаты"},email:{regexp:/^\S+@\S+\.\S+$/,regexpError:"Введен некорректный email",emptyError:"Необходимо указать email"},phone:{regexp:/^(8|\+7)(\s|\(|-)?(\d{3})(\s|\)|-)?(\d{3})(\s|-)?(\d{2})(\s|-)?(\d{2})$/,regexpError:"Введен некорректный телефон",emptyError:"Необходимо указать телефон"}},formatView:{categoryColorClass:{"софт-скил":"card__category_soft","хард-скил":"card__category_hard","кнопка":"card__category_button","дополнительное":"card__category_additional","другое":"card__category_other"}},catalogPage:{selector:".page",basketButtonSelector:".header__basket",basketCounterSelector:".header__basket-counter",catalogSelector:".gallery",wrapperSelector:".page__wrapper",preloaderSelector:".preloader",lockedClass:"page__wrapper_locked",viewPreloaderClass:"preloader_view",hidePreloaderClass:"preloader_hide"},appEvents:{eventCatalogChange:"catalog:change",eventProductSelect:"product:select",eventProductOpen:"product:open",eventProductAdd:"product:add",eventBasketOpen:"basket:open",eventBasketDelete:"basket:delete",eventOrderOpen:"order:open",eventOrderSubmit:"order:submit",eventOrderChange:"order:change",eventOrderError:"order:error",eventPaymentSelect:"payment:select",eventContactsOpen:"contacts:open",eventContactsChange:"contacts:change",eventContactsError:"contacts:error",eventSuccessClose:"success:close",eventOpen:"modal:open",eventClose:"modal:close"},cardCatalog:{templateId:"#card-catalog",selector:".card",className:"gallery__item",titleSelector:".card__title",priceSelector:".card__price",categorySelector:".card__category",imageSelector:".card__image"},cardPreview:{templateId:"#card-preview",selector:".card",className:"card_full",titleSelector:".card__title",priceSelector:".card__price",buttonSelector:".card__button",categorySelector:".card__category",imageSelector:".card__image",descriptionSelector:".card__text",textAdd:"В корзину",textDelete:"Удалить из корзины"},cardBasket:{templateId:"#card-basket",selector:".card",className:"card_compact",titleSelector:".card__title",priceSelector:".card__price",buttonDeleteSelector:".basket__item-delete",indexCardSelector:".basket__item-index"},basket:{templateId:"#basket",selector:".basket",cardListSelector:".basket__list",buttonSelector:".basket__button",priceSelector:".basket__price",textEmpty:"Пусто"},orderForm:{templateId:"#order",selector:".form[name=order]",buttonListSelector:".button_alt",activebuttonClass:"button_alt-active",InputListSelector:".form__input",buttonNextSelector:".button[type=submit]",formErrorSelector:".form__errors"},contactsForm:{templateId:"#contacts",selector:".form[name=contacts]",InputListSelector:".form__input",buttonNextSelector:".button[type=submit]",formErrorSelector:".form__errors"},successForm:{templateId:"#success",selector:".order-success",descriptionSelector:".order-success__description",buttonCloseSelector:".order-success__close",titleSelector:".order-success__title",classError:"order-success__error",textTitleSuccess:"Заказ оформлен",textTitleError:"Ошибка оформления заказа",textButtonSuccess:"За новыми покупками!",textButtonError:"Попробовать оформить заново",textTotal:function textTotal(t){return"Списано ".concat(t," синапсов")}},modal:{id:"#modal-container",selector:".modal__content",closeButtonSelector:".modal__close",contentSelector:".modal__content",activeClass:"modal_active"}};function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function isSelector(t){return"string"==typeof t&&t.length>1}function ensureAllElements(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;if(isSelector(t))return Array.from(r.querySelectorAll(t));if(t instanceof NodeList)return Array.from(t);if(Array.isArray(t))return t;throw new Error("Unknown selector element")}function ensureElement(t,r){if(isSelector(t)){var o=ensureAllElements(t,r);if(o.length>1&&console.warn("selector ".concat(t," return more then one element")),0===o.length)throw new Error("selector ".concat(t," return nothing"));return o.pop()}if(t instanceof HTMLElement)return t;throw new Error("Unknown selector element")}function cloneTemplate(t){return ensureElement(t).content.firstElementChild.cloneNode(!0)}function setElementData(t,r){for(var o in r)t.dataset[o]=String(r[o])}function createElement(t,r,o){var i,a,c=document.createElement(t);if(r)for(var l in r){var u=r[l];i=u,a=void 0,(a=Object.getPrototypeOf(i))!==Object.getPrototypeOf({})&&null!==a||"dataset"!==l?c[l]="boolean"==typeof u?u:String(u):setElementData(c,u)}if(o){var p,d=function _createForOfIteratorHelper(t,r){var o="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!o){if(Array.isArray(t)||(o=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){o&&(t=o);var i=0,a=function F(){};return{s:a,n:function n(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,u=!1;return{s:function s(){o=o.call(t)},n:function n(){var t=o.next();return l=t.done,t},e:function e(t){u=!0,c=t},f:function f(){try{l||null==o.return||o.return()}finally{if(u)throw c}}}}(Array.isArray(o)?o:[o]);try{for(d.s();!(p=d.n()).done;){var m=p.value;c.append(m)}}catch(t){d.e(t)}finally{d.f()}}return c}function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}function _defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function _toPrimitive(t,r){if("object"!==_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===_typeof(c)?c:String(c)),i)}var a,c}var i=function(){function EventEmitter(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,EventEmitter),this._events=new Map}return function _createClass(t,r,o){return r&&_defineProperties(t.prototype,r),o&&_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(EventEmitter,[{key:"on",value:function on(t,r){var o;this._events.has(t)||this._events.set(t,new Set),null===(o=this._events.get(t))||void 0===o||o.add(r)}},{key:"off",value:function off(t,r){var o;this._events.has(t)&&(this._events.get(t).delete(r),0===(null===(o=this._events.get(t))||void 0===o?void 0:o.size)&&this._events.delete(t))}},{key:"emit",value:function emit(t,r){this._events.forEach((function(o,i){"*"===i&&o.forEach((function(o){return o({eventName:t,data:r})})),(i instanceof RegExp&&i.test(t)||i===t)&&o.forEach((function(t){return t(r)}))}))}},{key:"onAll",value:function onAll(t){this.on("*",t)}},{key:"offAll",value:function offAll(){this._events=new Map}},{key:"trigger",value:function trigger(t,r){var o=this;return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(t,Object.assign(Object.assign({},i||{}),r||{}))}}}]),EventEmitter}();function api_typeof(t){return api_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},api_typeof(t)}function api_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function api_toPrimitive(t,r){if("object"!==api_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==api_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===api_typeof(c)?c:String(c)),i)}var a,c}var a=function(){function Api(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function api_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Api),this.baseUrl=t,this.options={headers:Object.assign({"Content-Type":"application/json"},null!==(r=o.headers)&&void 0!==r?r:{})}}return function api_createClass(t,r,o){return r&&api_defineProperties(t.prototype,r),o&&api_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Api,[{key:"handleResponse",value:function handleResponse(t){return t.ok?t.json():t.json().then((function(r){var o;return Promise.reject(null!==(o=r.error)&&void 0!==o?o:t.statusText)}))}},{key:"get",value:function get(t){return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:"GET"})).then(this.handleResponse)}},{key:"post",value:function post(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"POST";return fetch(this.baseUrl+t,Object.assign(Object.assign({},this.options),{method:o,body:JSON.stringify(r)})).then(this.handleResponse)}}]),Api}();function productAPI_typeof(t){return productAPI_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},productAPI_typeof(t)}function productAPI_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function productAPI_toPrimitive(t,r){if("object"!==productAPI_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==productAPI_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===productAPI_typeof(c)?c:String(c)),i)}var a,c}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function _possibleConstructorReturn(t,r){if(r&&("object"===productAPI_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var c=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(ProductAPI,t);var r=_createSuper(ProductAPI);function ProductAPI(t,o,i){var a;return function productAPI_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ProductAPI),(a=r.call(this,o,i)).cdn=t,a}return function productAPI_createClass(t,r,o){return r&&productAPI_defineProperties(t.prototype,r),o&&productAPI_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ProductAPI,[{key:"getProductList",value:function getProductList(){var t=this;return this.get("/product").then((function(r){return r.items.map((function(r){return Object.assign(Object.assign({},r),{image:t.cdn+r.image})}))}))}},{key:"getProduct",value:function getProduct(t){var r=this;return this.get("/product/".concat(t)).then((function(t){return Object.assign(Object.assign({},t),{image:r.cdn+t.image})}))}},{key:"postOrder",value:function postOrder(t){return this.post("/order",t).then((function(t){return t}))}}]),ProductAPI}(a);function catalog_typeof(t){return catalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},catalog_typeof(t)}function catalog_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function catalog_toPrimitive(t,r){if("object"!==catalog_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==catalog_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===catalog_typeof(c)?c:String(c)),i)}var a,c}var l=function(){function Catalog(t){!function catalog_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Catalog),this.events=t,this.errors={},this.clearCatalog(),this.clearBasket(),this.clearOrder(),this.errors={}}return function catalog_createClass(t,r,o){return r&&catalog_defineProperties(t.prototype,r),o&&catalog_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Catalog,[{key:"productList",get:function get(){return this._productList},set:function set(t){this._productList=t,this.events.emit(o.appEvents.eventCatalogChange)}},{key:"basketList",get:function get(){return this._basketList},set:function set(t){this._basketList=t}},{key:"order",get:function get(){return this._order},set:function set(t){this._order=t}},{key:"orderSuccess",get:function get(){return this._orderSuccess},set:function set(t){this._orderSuccess=t}},{key:"getBasketCount",value:function getBasketCount(){return this._basketList.length}},{key:"getBasketTotal",value:function getBasketTotal(){return this._basketList.reduce((function(t,r){return t+Number(r.price)}),0)}},{key:"setProductSelected",value:function setProductSelected(t){this.productSelected=t,this.events.emit(o.appEvents.eventProductOpen,this.productSelected)}},{key:"setOrderItems",value:function setOrderItems(){this._order.items=this._basketList.map((function(t){return t.id})),this._order.total=this.getBasketTotal()}},{key:"setOrderField",value:function setOrderField(t,r,i){this._order[r]=i,t===o.orderForm.templateId?this._validateOrderData():t===o.contactsForm.templateId&&this._validateContactsData()}},{key:"_validateOrderData",value:function _validateOrderData(){var t={};return this._order.payment||(t.payment=o.formatData.payment.emptyError),this._order.address?o.formatData.address.regexp.test(this._order.address)||(t.address=o.formatData.address.regexpError):t.address=o.formatData.address.emptyError,this.errors=t,this.events.emit(o.appEvents.eventOrderError,this.errors),0===Object.keys(t).length}},{key:"_validateContactsData",value:function _validateContactsData(){var t={};return this._order.email?o.formatData.email.regexp.test(this._order.email)||(t.email=o.formatData.email.regexpError):t.email=o.formatData.email.emptyError,this._order.phone?o.formatData.phone.regexp.test(this._order.phone)||(t.phone=o.formatData.phone.regexpError):t.phone=o.formatData.phone.emptyError,this.errors=t,this.events.emit(o.appEvents.eventContactsError,this.errors),0===Object.keys(t).length}},{key:"updateProduct",value:function updateProduct(t){var r=this._productList.find((function(r){return r.id===t.id}));void 0!==r&&(r.category=t.category,r.title=t.title,r.description=t.description,r.image=t.image,r.price=t.price)}},{key:"checkProductInBasket",value:function checkProductInBasket(t){return void 0!==this._basketList.find((function(r){return r.id===t.id}))}},{key:"addBasketProduct",value:function addBasketProduct(t){this._basketList.push(t)}},{key:"deleteBasketProduct",value:function deleteBasketProduct(t){this._basketList=this._basketList.filter((function(r){return r.id!==t.id}))}},{key:"clearCatalog",value:function clearCatalog(){this._productList=[],this.productSelected={id:"",title:"",category:"другое",description:"",image:"",price:null}}},{key:"clearBasket",value:function clearBasket(){this._basketList=[]}},{key:"clearOrder",value:function clearOrder(){this._orderSuccess={id:"",total:0},this._order={payment:"card",address:"",email:"",phone:"",total:0,items:[]}}}]),Catalog}();function catalogPage_typeof(t){return catalogPage_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},catalogPage_typeof(t)}function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return catalogPage_arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function catalogPage_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return catalogPage_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return catalogPage_arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function catalogPage_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function catalogPage_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function catalogPage_toPrimitive(t,r){if("object"!==catalogPage_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==catalogPage_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===catalogPage_typeof(c)?c:String(c)),i)}var a,c}var u=function(){function CatalogPage(t,r,i){var a=this;!function catalogPage_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CatalogPage),this.events=r,this._catalogPageSetting=o.catalogPage,this.contentElement=t,this.couterBasketElement=ensureElement(this._catalogPageSetting.basketCounterSelector,this.contentElement),this.buttonBasketElement=ensureElement(this._catalogPageSetting.basketButtonSelector,this.contentElement),this.catologElement=ensureElement(this._catalogPageSetting.catalogSelector,this.contentElement),this.wrapperElement=ensureElement(this._catalogPageSetting.wrapperSelector,this.contentElement),this.preloaderElement=ensureElement(this._catalogPageSetting.preloaderSelector,this.contentElement),this.preloaderElement.classList.add(this._catalogPageSetting.viewPreloaderClass),this.buttonBasketElement.addEventListener("click",(function(){a.events.emit(o.appEvents.eventBasketOpen)}))}return function catalogPage_createClass(t,r,o){return r&&catalogPage_defineProperties(t.prototype,r),o&&catalogPage_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(CatalogPage,[{key:"locked",set:function set(t){t?this.wrapperElement.classList.add(this._catalogPageSetting.lockedClass):this.wrapperElement.classList.remove(this._catalogPageSetting.lockedClass)}},{key:"productList",set:function set(t){var r;(r=this.catologElement).replaceChildren.apply(r,_toConsumableArray(t))}},{key:"couterBasket",set:function set(t){this.couterBasketElement.textContent=String(t)}},{key:"viewPreloader",value:function viewPreloader(t){t?this.preloaderElement.classList.remove(this._catalogPageSetting.hidePreloaderClass):this.preloaderElement.classList.add(this._catalogPageSetting.hidePreloaderClass)}},{key:"render",value:function render(){return this.contentElement}}]),CatalogPage}();function basket_typeof(t){return basket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},basket_typeof(t)}function basket_toConsumableArray(t){return function basket_arrayWithoutHoles(t){if(Array.isArray(t))return basket_arrayLikeToArray(t)}(t)||function basket_iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function basket_unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return basket_arrayLikeToArray(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return basket_arrayLikeToArray(t,r)}(t)||function basket_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function basket_arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var o=0,i=new Array(r);o<r;o++)i[o]=t[o];return i}function basket_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function basket_toPrimitive(t,r){if("object"!==basket_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==basket_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===basket_typeof(c)?c:String(c)),i)}var a,c}var p=function(){function Basket(t,r,i){!function basket_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Basket),this.events=r,this._bascketSetting=o.basket,this.contentElement=cloneTemplate(t),this.productListElement=ensureElement(this._bascketSetting.cardListSelector,this.contentElement),this.buttonElement=ensureElement(this._bascketSetting.buttonSelector,this.contentElement),this.basketTotalElement=ensureElement(this._bascketSetting.priceSelector,this.contentElement),this.buttonElement.addEventListener("click",(function(){r.emit(o.appEvents.eventOrderOpen)}))}return function basket_createClass(t,r,o){return r&&basket_defineProperties(t.prototype,r),o&&basket_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Basket,[{key:"productList",set:function set(t){var r;t.length?(r=this.productListElement).replaceChildren.apply(r,basket_toConsumableArray(t)):this.productListElement.replaceChildren(createElement("p",{textContent:this._bascketSetting.textEmpty}))}},{key:"basketTotal",set:function set(t){this.basketTotalElement.textContent=o.formatData.formatCurrency(t),this.buttonElement.disabled=0===t}},{key:"render",value:function render(){return this.contentElement}}]),Basket}();function modal_typeof(t){return modal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},modal_typeof(t)}function modal_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function modal_toPrimitive(t,r){if("object"!==modal_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==modal_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===modal_typeof(c)?c:String(c)),i)}var a,c}var d=function(){function Modal(t,r,i){!function modal_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Modal),this.events=r,this._modalSetting=o.modal,this.contentElement=t,this.closeButtonElement=ensureElement(this._modalSetting.closeButtonSelector,t),this._content=ensureElement(this._modalSetting.contentSelector,t),this.closeButtonElement.addEventListener("click",this.close.bind(this)),this.contentElement.addEventListener("click",this.close.bind(this)),this._content.addEventListener("click",(function(t){return t.stopPropagation()}))}return function modal_createClass(t,r,o){return r&&modal_defineProperties(t.prototype,r),o&&modal_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(Modal,[{key:"content",set:function set(t){this._content.replaceChildren(t)}},{key:"open",value:function open(){this.contentElement.classList.add(this._modalSetting.activeClass),this.events.emit(o.appEvents.eventOpen)}},{key:"close",value:function close(){this.contentElement.classList.remove(this._modalSetting.activeClass),this.content=null,this.events.emit(o.appEvents.eventClose)}},{key:"render",value:function render(){return this.open(),this.contentElement}}]),Modal}();function cardCatalog_typeof(t){return cardCatalog_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cardCatalog_typeof(t)}function cardCatalog_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function cardCatalog_toPrimitive(t,r){if("object"!==cardCatalog_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==cardCatalog_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===cardCatalog_typeof(c)?c:String(c)),i)}var a,c}var m=function(){function CardCatalog(t,r,i){!function cardCatalog_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CardCatalog),this.events=r,this._cardCatalogSetting=o.cardCatalog,this.contentElement=cloneTemplate(t),this.titleElement=ensureElement(this._cardCatalogSetting.titleSelector,this.contentElement),this.priceElement=ensureElement(this._cardCatalogSetting.priceSelector,this.contentElement),this.contentElement.querySelector(this._cardCatalogSetting.categorySelector)&&(this.categoryElement=ensureElement(this._cardCatalogSetting.categorySelector,this.contentElement)),this.contentElement.querySelector(this._cardCatalogSetting.imageSelector)&&(this.imageElement=ensureElement(this._cardCatalogSetting.imageSelector,this.contentElement)),(null==i?void 0:i.onClick)&&this.contentElement.addEventListener("click",i.onClick)}return function cardCatalog_createClass(t,r,o){return r&&cardCatalog_defineProperties(t.prototype,r),o&&cardCatalog_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardCatalog,[{key:"category",set:function set(t){this.categoryElement&&(this.categoryElement.textContent=t,this.categoryElement.classList.add(o.formatView.categoryColorClass[t]))}},{key:"setPrice",value:function setPrice(t){return null===t?o.formatData.formatPriceNull:o.formatData.formatCurrency(t)}},{key:"render",value:function render(t,r){return this.category=t.category,this.titleElement.textContent=t.title,this.imageElement.src=t.image,this.imageElement.alt=t.title,this.priceElement.textContent=this.setPrice(t.price),this.contentElement}}]),CardCatalog}();function cardPreview_typeof(t){return cardPreview_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cardPreview_typeof(t)}function cardPreview_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function cardPreview_toPrimitive(t,r){if("object"!==cardPreview_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==cardPreview_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===cardPreview_typeof(c)?c:String(c)),i)}var a,c}function cardPreview_setPrototypeOf(t,r){return cardPreview_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},cardPreview_setPrototypeOf(t,r)}function cardPreview_createSuper(t){var r=function cardPreview_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=cardPreview_getPrototypeOf(t);if(r){var a=cardPreview_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function cardPreview_possibleConstructorReturn(t,r){if(r&&("object"===cardPreview_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function cardPreview_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function cardPreview_getPrototypeOf(t){return cardPreview_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},cardPreview_getPrototypeOf(t)}var y=function(t){!function cardPreview_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&cardPreview_setPrototypeOf(t,r)}(CardPreview,t);var r=cardPreview_createSuper(CardPreview);function CardPreview(t,i,a){var c;return function cardPreview_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CardPreview),(c=r.call(this,t,i)).events=i,c._cardPreviewSetting=o.cardPreview,c.descriptionElement=ensureElement(c._cardPreviewSetting.descriptionSelector,c.contentElement),c.buttonElement=ensureElement(c._cardPreviewSetting.buttonSelector,c.contentElement),c.buttonElement.addEventListener("click",(function(){c.events.emit(o.appEvents.eventProductAdd)})),c}return function cardPreview_createClass(t,r,o){return r&&cardPreview_defineProperties(t.prototype,r),o&&cardPreview_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardPreview,[{key:"setButtonEnabled",value:function setButtonEnabled(t){t.price?this.buttonElement.removeAttribute("disabled"):this.buttonElement.setAttribute("disabled","true")}},{key:"setButtonText",value:function setButtonText(t){this.buttonElement.textContent=t?this._cardPreviewSetting.textAdd:this._cardPreviewSetting.textDelete}},{key:"render",value:function render(t){return this.category=t.category,this.titleElement.textContent=t.title,this.imageElement.src=t.image,this.imageElement.alt=t.title,this.priceElement.textContent=this.setPrice(t.price),this.descriptionElement.textContent=t.description,this.contentElement}}]),CardPreview}(m);function cardBasket_typeof(t){return cardBasket_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cardBasket_typeof(t)}function cardBasket_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function cardBasket_toPrimitive(t,r){if("object"!==cardBasket_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==cardBasket_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===cardBasket_typeof(c)?c:String(c)),i)}var a,c}function cardBasket_setPrototypeOf(t,r){return cardBasket_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function _setPrototypeOf(t,r){return t.__proto__=r,t},cardBasket_setPrototypeOf(t,r)}function cardBasket_createSuper(t){var r=function cardBasket_isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var o,i=cardBasket_getPrototypeOf(t);if(r){var a=cardBasket_getPrototypeOf(this).constructor;o=Reflect.construct(i,arguments,a)}else o=i.apply(this,arguments);return function cardBasket_possibleConstructorReturn(t,r){if(r&&("object"===cardBasket_typeof(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function cardBasket_assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,o)}}function cardBasket_getPrototypeOf(t){return cardBasket_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},cardBasket_getPrototypeOf(t)}var v=function(t){!function cardBasket_inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&cardBasket_setPrototypeOf(t,r)}(CardBasket,t);var r=cardBasket_createSuper(CardBasket);function CardBasket(t,i,a){var c;return function cardBasket_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CardBasket),(c=r.call(this,t,i)).events=i,c._basketCardSetting=o.cardBasket,c.indexElement=ensureElement(c._basketCardSetting.indexCardSelector,c.contentElement),c.buttonDeleteElement=ensureElement(c._basketCardSetting.buttonDeleteSelector,c.contentElement),(null==a?void 0:a.onClick)&&c.buttonDeleteElement.addEventListener("click",a.onClick),c}return function cardBasket_createClass(t,r,o){return r&&cardBasket_defineProperties(t.prototype,r),o&&cardBasket_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(CardBasket,[{key:"render",value:function render(t,r){return this.indexElement.textContent=String(r),this.titleElement.textContent=t.title,this.priceElement.textContent=this.setPrice(t.price),this.contentElement}}]),CardBasket}(m);function contactsForm_typeof(t){return contactsForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},contactsForm_typeof(t)}function contactsForm_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function contactsForm_toPrimitive(t,r){if("object"!==contactsForm_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==contactsForm_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===contactsForm_typeof(c)?c:String(c)),i)}var a,c}var h=function(){function ContactsForm(t,r,i){var a=this;!function contactsForm_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ContactsForm),this.events=r,this._contactsFormSetting=o.contactsForm,this.contentElement=cloneTemplate(t),this.buttonNextElement=ensureElement(this._contactsFormSetting.buttonNextSelector,this.contentElement),this.formErrorsElement=ensureElement(this._contactsFormSetting.formErrorSelector,this.contentElement),this.contentElement.addEventListener("input",(function(t){var r=t.target,i=r.name,c=r.value,l=a._contactsFormSetting.templateId;a.events.emit(o.appEvents.eventContactsChange,{partName:l,field:i,value:c})})),this.contentElement.addEventListener("submit",(function(t){t.preventDefault(),a.events.emit(o.appEvents.eventOrderSubmit)}))}return function contactsForm_createClass(t,r,o){return r&&contactsForm_defineProperties(t.prototype,r),o&&contactsForm_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(ContactsForm,[{key:"valid",set:function set(t){this.buttonNextElement.disabled=!t}},{key:"refresh",value:function refresh(){this.renderError({}),this.valid=!1,this.contentElement.reset()}},{key:"renderError",value:function renderError(t){var r=t.email,o=t.phone;this.valid=!r&&!o,this.formErrorsElement.textContent=Object.values({email:r,phone:o}).filter((function(t){return!!t})).join("; ")}},{key:"render",value:function render(){return this.contentElement}}]),ContactsForm}();function orderForm_typeof(t){return orderForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},orderForm_typeof(t)}function orderForm_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function orderForm_toPrimitive(t,r){if("object"!==orderForm_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==orderForm_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===orderForm_typeof(c)?c:String(c)),i)}var a,c}var b=function(){function OrderForm(t,r,i){var a=this;!function orderForm_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,OrderForm),this.events=r,this._orderFormSetting=o.orderForm,this.contentElement=cloneTemplate(t),this.buttonListElement=ensureAllElements(this._orderFormSetting.buttonListSelector,this.contentElement),this.buttonNextElement=ensureElement(this._orderFormSetting.buttonNextSelector,this.contentElement),this.formErrorsElement=ensureElement(this._orderFormSetting.formErrorSelector,this.contentElement),this.buttonListElement.forEach((function(t){t.addEventListener("click",(function(){var i=t.name;a.payment=i;var c=a._orderFormSetting.templateId;r.emit(o.appEvents.eventPaymentSelect,{partName:c,field:"Payment",value:i})}))})),this.contentElement.addEventListener("input",(function(t){var r=t.target,i=r.name,c=r.value,l=a._orderFormSetting.templateId;a.events.emit(o.appEvents.eventOrderChange,{partName:l,field:i,value:c})})),this.contentElement.addEventListener("submit",(function(t){t.preventDefault(),a.events.emit(o.appEvents.eventContactsOpen)}))}return function orderForm_createClass(t,r,o){return r&&orderForm_defineProperties(t.prototype,r),o&&orderForm_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(OrderForm,[{key:"payment",set:function set(t){var r=this;this.buttonListElement.forEach((function(o){o.classList.toggle(r._orderFormSetting.activebuttonClass,o.name===t)}))}},{key:"valid",set:function set(t){this.buttonNextElement.disabled=!t}},{key:"refresh",value:function refresh(){this.renderError({}),this.valid=!1,this.contentElement.reset()}},{key:"renderError",value:function renderError(t){var r=t.payment,o=t.address;this.valid=!o&&!r,this.formErrorsElement.textContent=Object.values({address:o,payment:r}).filter((function(t){return!!t})).join("; ")}},{key:"render",value:function render(){return this.contentElement}}]),OrderForm}();function successForm_typeof(t){return successForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},successForm_typeof(t)}function successForm_defineProperties(t,r){for(var o=0;o<r.length;o++){var i=r[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(a=i.key,c=void 0,c=function successForm_toPrimitive(t,r){if("object"!==successForm_typeof(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var i=o.call(t,r||"default");if("object"!==successForm_typeof(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(a,"string"),"symbol"===successForm_typeof(c)?c:String(c)),i)}var a,c}var _=function(){function SuccessForm(t,r,i){!function successForm_classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SuccessForm),this.events=r,this._successFormSetting=o.successForm,this.contentElement=cloneTemplate(t),this.titleElement=ensureElement(this._successFormSetting.titleSelector,this.contentElement),this.closeButtonElement=ensureElement(this._successFormSetting.buttonCloseSelector,this.contentElement),this.successDescriptionElement=ensureElement(this._successFormSetting.descriptionSelector,this.contentElement),this.closeButtonElement.addEventListener("click",(function(){r.emit(o.appEvents.eventSuccessClose)}))}return function successForm_createClass(t,r,o){return r&&successForm_defineProperties(t.prototype,r),o&&successForm_defineProperties(t,o),Object.defineProperty(t,"prototype",{writable:!1}),t}(SuccessForm,[{key:"refresh",value:function refresh(){this.titleElement.textContent=this._successFormSetting.textTitleSuccess,this.successDescriptionElement.textContent="",this.closeButtonElement.textContent=this._successFormSetting.textButtonSuccess,this.contentElement.classList.remove(this._successFormSetting.classError)}},{key:"renderError",value:function renderError(t){return this.titleElement.textContent=this._successFormSetting.textTitleError,this.successDescriptionElement.textContent=t,this.closeButtonElement.textContent=this._successFormSetting.textButtonError,this.contentElement.classList.add(this._successFormSetting.classError),this.contentElement}},{key:"render",value:function render(t){return this.refresh(),this.successDescriptionElement.textContent=this._successFormSetting.textTotal(t),this.contentElement}}]),SuccessForm}(),g=new i;g.onAll((function(t){var r=t.eventName,o=t.data;console.log(r,o)}));var E=new c(r,t),P=new l(g),S=ensureElement(o.basket.templateId),k=ensureElement(o.cardCatalog.templateId),C=ensureElement(o.cardPreview.templateId),w=ensureElement(o.cardBasket.templateId),O=ensureElement(o.orderForm.templateId),B=ensureElement(o.contactsForm.templateId),j=ensureElement(o.successForm.templateId),A=new u(document.body,g),T=new d(ensureElement(o.modal.id),g),L=new p(S,g),x=new y(C,g),I=new b(O,g),N=new h(B,g),D=new _(j,g);function getBasketList(){var t=0;return P.basketList.map((function(r){return new v(w,g,{onClick:function onClick(){return g.emit(o.appEvents.eventBasketDelete,r)}}).render(r,t+=1)}))}g.on(o.appEvents.eventCatalogChange,(function(){A.productList=P.productList.map((function(t){return new m(k,g,{onClick:function onClick(){return g.emit(o.appEvents.eventProductSelect,t)}}).render(t)})),A.couterBasket=P.getBasketCount()})),g.on(o.appEvents.eventProductSelect,(function(t){A.viewPreloader(!0),E.getProduct(t.id).then((function(r){t=r,P.updateProduct(t)})).catch((function(t){console.log(t)})).finally((function(){A.viewPreloader(!1),P.setProductSelected(t)}))})),g.on(o.appEvents.eventProductOpen,(function(t){x.setButtonText(!P.checkProductInBasket(t)),x.setButtonEnabled(t),T.content=x.render(t),T.render()})),g.on(o.appEvents.eventProductAdd,(function(){P.checkProductInBasket(P.productSelected)?P.deleteBasketProduct(P.productSelected):P.addBasketProduct(P.productSelected),A.couterBasket=P.getBasketCount(),x.setButtonText(!P.checkProductInBasket(P.productSelected))})),g.on(o.appEvents.eventBasketOpen,(function(){L.productList=getBasketList(),L.basketTotal=P.getBasketTotal(),T.content=L.render(),T.render()})),g.on(o.appEvents.eventBasketDelete,(function(t){P.deleteBasketProduct(t),L.productList=getBasketList(),L.basketTotal=P.getBasketTotal(),A.couterBasket=P.getBasketCount()})),g.on(o.appEvents.eventOrderOpen,(function(){P.clearOrder(),I.payment=P.order.payment,I.refresh(),T.content=I.render(),T.render()})),g.on(o.appEvents.eventPaymentSelect,(function(t){P.setOrderField(t.partName,t.field,t.value)})),g.on(o.appEvents.eventOrderChange,(function(t){P.setOrderField(t.partName,t.field,t.value)})),g.on(o.appEvents.eventOrderError,(function(t){I.renderError(t)})),g.on(o.appEvents.eventContactsOpen,(function(){N.refresh(),T.content=N.render(),T.render()})),g.on(o.appEvents.eventContactsChange,(function(t){P.setOrderField(t.partName,t.field,t.value)})),g.on(o.appEvents.eventContactsError,(function(t){N.renderError(t)})),g.on(o.appEvents.eventOrderSubmit,(function(){A.viewPreloader(!0),P.setOrderItems(),E.postOrder(P.order).then((function(t){P.orderSuccess=t,T.content=D.render(P.orderSuccess.total),P.clearOrder(),P.clearBasket(),A.couterBasket=P.getBasketCount()})).catch((function(t){P.clearOrder(),T.content=D.renderError(t)})).finally((function(){A.viewPreloader(!1),T.render()}))})),g.on(o.appEvents.eventSuccessClose,(function(){T.close()})),g.on(o.appEvents.eventOpen,(function(){A.locked=!0})),g.on(o.appEvents.eventClose,(function(){A.locked=!1})),A.viewPreloader(!0),E.getProductList().then((function(t){P.productList=t})).catch((function(t){console.log(t)})).finally((function(){A.viewPreloader(!1)}))}();
//# sourceMappingURL=main.js.map